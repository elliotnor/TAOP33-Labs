#-------------------------------------------------------------------------------
# Set covering problem
#-------------------------------------------------------------------------------

#-------------------------------------------------------------------------------
#  Load packages
#-------------------------------------------------------------------------------
using JuMP, HiGHS, JSON3, Printf

#-------------------------------------------------------------------------------
# Additional functions
#-------------------------------------------------------------------------------

include("additional_functions.jl")
avdelare = repeat('-',60)			
#-------------------------------------------------------------------------------



#-------------------------------------------------------------------------------
# The model saved as COVER
#-------------------------------------------------------------------------------
COVER  = Model(HiGHS.Optimizer)
#-------------------------------------------------------------------------------


################# Student part #################################################

#-------------------------------------------------------------------------------
# Define variables
#-------------------------------------------------------------------------------
@variable(COVER, x[1:8, 1:8] >= 0, Int)
#-------------------------------------------------------------------------------


#-------------------------------------------------------------------------------
# Add objective function
#-------------------------------------------------------------------------------
@objective(COVER, Max, sum(x[c,r] for c in 1:8 , r in 1:8))
#-------------------------------------------------------------------------------


#-------------------------------------------------------------------------------
# Add constraints
#-------------------------------------------------------------------------------
@constraint(COVER, col[c in 1:8], sum(x[c,r] for r in 1:8) <= 1)
@constraint(COVER, row[r in 1:8], sum(x[c,r] for c in 1:8) <= 1)
#-------------------------------------------------------------------------------


############### End student part ###############################################

#-------------------------------------------------------------------------------
# Display defined problem
#-------------------------------------------------------------------------------
#println(avdelare)
#println("Set covering problem")
#println(avdelare)
#print(COVER)
#println(avdelare)
#-------------------------------------------------------------------------------

#-------------------------------------------------------------------------------
#Solve the optimisation problem
#-------------------------------------------------------------------------------
println("\n\n\n>>> SOLVING SET COVERING PROBLEM <<<\n")
solution = optimize!(COVER)

println("\n\n\n>>> OPTIMAL SOLUTION <<<\n")
println(avdelare)
zStar = objective_value(COVER)
zStar = round(zStar,digits=2)
println( "Optimal objective value:\n $(zStar)")
println(avdelare)
#-------------------------------------------------------------------------------
println("Optimal Solution:")
println(avdelare)
#-------------------------------------------------------------------------------
#print_integer(COVER) # This prints all the variables 
print_integer(COVER)
# If you want, you can write a small code to print only nonzero variables. 
#-------------------------------------------------------------------------------